{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicholasdewaal/Documents/code/udemy/complete-react-developer-in-2021/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/nicholasdewaal/Documents/code/udemy/complete-react-developer-in-2021/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/nicholasdewaal/Documents/code/udemy/complete-react-developer-in-2021/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nicholasdewaal/Documents/code/udemy/complete-react-developer-in-2021/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Switch,Route,Redirect}from'react-router-dom';// import { connect } from 'react-redux'\nimport{useDispatch,useSelector}from'react-redux';// PAGES\nimport HomePage from'./pages/homepage/HomePage';import ShopPage from'./pages/shopPage/ShopPage';import SignInAndSignUpPage from'./pages/sign-in-sign-up/SignInSignUp';import CheckoutPage from'./pages/checkoutPage/CheckoutPage';// COMPONENTS\nimport Header from'./components/header/Header';// UTILS\nimport{auth,createUserProfileDocument}from'./firebase/firebase.utils';// ACTIONS\nimport{setCurrentUser}from'./redux/user/user.actions';// SELECTORS\nimport{selectCurrentUser}from'./redux/user/user.selectors';// STYLE\nimport'./App.css';// class App extends React.Component {\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userAuth=_useState2[0],setUserAuth=_useState2[1];var currentUser=useSelector(selectCurrentUser);useEffect(function(){var unsubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=8;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;setUserAuth(userAuth);userRef.onSnapshot(function(snapShot){dispatch(setCurrentUser(_objectSpread({id:snapShot.id},snapShot.data())));});_context.next=9;break;case 8:dispatch(setCurrentUser(null));case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());return unsubscribeFromAuth;},[dispatch]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/_jsx(Route,{path:\"/shop\",component:ShopPage}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signin\",render:function render(){return currentUser?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(SignInAndSignUpPage,{});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/checkout\",component:CheckoutPage})]})]});};export default App;","map":{"version":3,"sources":["/Users/nicholasdewaal/Documents/code/udemy/complete-react-developer-in-2021/crwn-clothing/src/App.js"],"names":["React","useEffect","useState","Switch","Route","Redirect","useDispatch","useSelector","HomePage","ShopPage","SignInAndSignUpPage","CheckoutPage","Header","auth","createUserProfileDocument","setCurrentUser","selectCurrentUser","App","dispatch","userAuth","setUserAuth","currentUser","unsubscribeFromAuth","onAuthStateChanged","userRef","onSnapshot","snapShot","id","data"],"mappings":"4zBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,QAAxB,KAAwC,kBAAxC,CACA;AACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA;AACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,sCAAhC,CACA,MAAOC,CAAAA,YAAP,KAAyB,mCAAzB,CAEA;AACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CAEA;AACA,OAASC,IAAT,CAAeC,yBAAf,KAAgD,2BAAhD,CAEA;AACA,OAASC,cAAT,KAA+B,2BAA/B,CAEA;AACA,OAASC,iBAAT,KAAkC,6BAAlC,CAEA;AACA,MAAO,WAAP,CAEA;wFACA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CADgB,cAEgBJ,QAAQ,CAAC,IAAD,CAFxB,wCAETiB,QAFS,eAECC,WAFD,eAGhB,GAAMC,CAAAA,WAAW,CAAGd,WAAW,CAACS,iBAAD,CAA/B,CAEAf,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,mBAAmB,CAAGT,IAAI,CAACU,kBAAL,0FAAwB,iBAAOJ,QAAP,kIAC9CA,QAD8C,+CAE1BL,CAAAA,yBAAyB,CAACK,QAAD,CAFC,QAE1CK,OAF0C,eAIhDJ,WAAW,CAACD,QAAD,CAAX,CACAK,OAAO,CAACC,UAAR,CAAmB,SAACC,QAAD,CAAc,CAC/BR,QAAQ,CACNH,cAAc,gBACZY,EAAE,CAAED,QAAQ,CAACC,EADD,EAETD,QAAQ,CAACE,IAAT,EAFS,EADR,CAAR,CAMD,CAPD,EALgD,6BAchDV,QAAQ,CAACH,cAAc,CAAC,IAAD,CAAf,CAAR,CAdgD,sDAAxB,+DAA5B,CAkBA,MAAOO,CAAAA,mBAAP,CACD,CApBQ,CAoBN,CAACJ,QAAD,CApBM,CAAT,CAsBA,mBACE,oCACE,KAAC,MAAD,IADF,cAEE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEV,QAAjC,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAEC,QAA/B,EAFF,cAGE,KAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,SAFP,CAGE,MAAM,CAAE,wBACNY,CAAAA,WAAW,cAAG,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAH,cAAyB,KAAC,mBAAD,IAD9B,EAHV,EAHF,cAUE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,WAAlB,CAA8B,SAAS,CAAEV,YAAzC,EAVF,GAFF,GADF,CAiBD,CA5CD,CA8CA,cAAeM,CAAAA,GAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\n// import { connect } from 'react-redux'\nimport { useDispatch, useSelector } from 'react-redux'\n\n// PAGES\nimport HomePage from './pages/homepage/HomePage'\nimport ShopPage from './pages/shopPage/ShopPage'\nimport SignInAndSignUpPage from './pages/sign-in-sign-up/SignInSignUp'\nimport CheckoutPage from './pages/checkoutPage/CheckoutPage'\n\n// COMPONENTS\nimport Header from './components/header/Header'\n\n// UTILS\nimport { auth, createUserProfileDocument } from './firebase/firebase.utils'\n\n// ACTIONS\nimport { setCurrentUser } from './redux/user/user.actions'\n\n// SELECTORS\nimport { selectCurrentUser } from './redux/user/user.selectors'\n\n// STYLE\nimport './App.css'\n\n// class App extends React.Component {\nconst App = () => {\n  const dispatch = useDispatch()\n  const [userAuth, setUserAuth] = useState(null)\n  const currentUser = useSelector(selectCurrentUser)\n\n  useEffect(() => {\n    const unsubscribeFromAuth = auth.onAuthStateChanged(async (userAuth) => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth)\n\n        setUserAuth(userAuth)\n        userRef.onSnapshot((snapShot) => {\n          dispatch(\n            setCurrentUser({\n              id: snapShot.id,\n              ...snapShot.data(),\n            })\n          )\n        })\n      } else {\n        dispatch(setCurrentUser(null))\n      }\n    })\n\n    return unsubscribeFromAuth\n  }, [dispatch])\n\n  return (\n    <div>\n      <Header />\n      <Switch>\n        <Route exact path='/' component={HomePage} />\n        <Route path='/shop' component={ShopPage} />\n        <Route\n          exact\n          path='/signin'\n          render={() =>\n            currentUser ? <Redirect to='/' /> : <SignInAndSignUpPage />\n          }\n        />\n        <Route exact path='/checkout' component={CheckoutPage} />\n      </Switch>\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}